{% extends 'home/layout.html' %}

{% block content %}
<div class="container">
    <h1 class="mt-5">U.S. Chronic Disease Indicator</h3>
    <p class="lead"> 
         CDC's Division of Population Health provides cross-cutting set of 124 indicators that were developed by consensus and that
        allows states and territories and large metropolitan areas to uniformly define, collect, and report chronic disease data
        that are important to public health practice and available for states, territories and large metropolitan areas. In addition
        to providing access to state-specific indicator data, the CDI web site serves as a gateway to additional information and
        data resources.
        <br>
    </p>
    <div style='display:inline;'>
    <form action="" method="post">
        {% csrf_token %}
        <p><button type="submit" class="btn btn-primary" name="submit" value="submit" onclick="form.submit()">Data set has: {{total}} tuples</button></p>
    </form>
    
    </div>
    
</div>

<br>
<br>


<div class="container">
    
    <style scoped>
        body {font-family: Arial, Helvetica, sans-serif;}
        
        /* The Modal (background) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        
        /* The Close Button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

    </style>

    <p class="lead"> Select your categories of interest and see all available data</p>

    <!-- {% for row in main_content %}
        <label for="sel">{{row.title}}: {{row.save}} </label>
        <p><button id="{{row.title}}" type="submit" class="btn btn-primary" {{row.disabled}}>Select</button></p>

        <div id="search" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="container">
                    <form action="" method="post">
                        {% csrf_token %}
                        <h4>{{row.title}}:</h4>
                        {% for rows in row.fields %}
                            <input type="checkbox" value="{{rows}}" name="choices[]"><span>{{rows}}</span><br>
                        {% endfor %}
                        <br><button type="submit" class="{{btn_class}}" name="{{row.title}}" value="{{row.title}}" onclick="form.submit()">Done</button>
                    </form>
                </div>
            </div>
        </div>
    {% endfor %}   -->

    {% for row in main_content %}
    <label for="sel">{{row.title}}: {{row.save}} </label>
    <div class="container">
        <form action="" method="post">
            {% csrf_token %}
            {% for rows in row.fields %}
                <input type="checkbox" value="{{rows}}" name="choices[]"><span>{{rows}}</span><br>
            {% endfor %}
            <br><button type="submit" class="{{btn_class}}" name="{{row.title}}" value="{{row.title}}" onclick="form.submit()">Done</button><br>
        </form>
        <br>
        <br>
    </div>
    {% endfor %}  
    <br>
    <form action="" method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-success" name="search" value="search" onclick="form.submit()">Search</button>
    </form> 

    <script>
        var modal = document.getElementById('search');
        var btn_topics = document.getElementById("Topics");  
        var btn_question = document.getElementById("Questions");  
        var btn_indicator = document.getElementById("Indicator");  
        var btn_year = document.getElementById("Year");  
        var btn_location = document.getElementById("Location");  
        var btn_population = document.getElementById("Population");  

        var span = document.getElementsByClassName("close")[0];
        
        btn_topics.onclick = function() {
            modal.style.display = "block";
        }
        btn_question.onclick = function() {
            modal.style.display = "block";
        }        
        btn_indicator.onclick = function() {
            modal.style.display = "block";
        }
        btn_year.onclick = function() {
            modal.style.display = "block";
        }
        btn_location.onclick = function() {
            modal.style.display = "block";
        }

        btn_population.onclick = function() {
            modal.style.display = "block";
        }   

        span.onclick = function() {
            modal.style.display = "none";
        }
        
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>

    {% if ans %}
    <!-- <form action='' method='post'>
        {% csrf_token %}
        <button type='submit' class='btn btn-primary' name='export' value='export' onclick='form.submit()'>Export csv file</button>
    </form> -->

    <div class="container">
        <table>
            </tr>
            {% for row in ans %}
            <t>
                <td>{{row}}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}


</div>
{% endblock %}
